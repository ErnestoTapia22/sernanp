<!-- ============================================================== -->
<!-- Container fluid  -->
<!-- ============================================================== -->
<div class="container-fluid">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="row page-titles">
    <div class="col-auto align-self-center">
      <h4 class="text-nowrap">Crear Acuerdo</h4>
    </div>
    <div class="col">
      <div class="d-flex justify-content-end align-items-center text-end">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb justify-content-end">
            <li class="breadcrumb-item"><a routerLink="/map">Inicio</a></li>
            <li class="breadcrumb-item">
              <a routerLink="/agreement">Acuerdos</a>
            </li>
            <li class="breadcrumb-item text-nowrap active">Nuevo acuerdo</li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Start Page Content -->
  <!-- ============================================================== -->
  <div class="row">
    <div class="col-12">
      <ul class="nav nav-tabs nav-tabs-flat" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="workPlan-tab"
            data-bs-toggle="tab"
            data-bs-target="#tabAgreement"
            type="button"
            role="tab"
          >
            Datos Generales
          </button>
        </li>
      </ul>

      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane pt-2 fade show active"
          id="tabAgreement"
          role="tabpanel"
          aria-labelledby="agreement-tab"
        >
          <form
            action="#"
            [formGroup]="form"
            (ngSubmit)="insertAgreement()"
            novalidate
          >
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">General</label>

                <button
                  type="submit"
                  class="btn btn-sm btn-outline-success mx-2"
                  [disabled]="disabled"
                >
                  <i class="bi bi-save"></i>
                  Guardar
                </button>
              </div>
              <div class="card-body" id="parent">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="txtCode" class="form-label">Código (*)</label>
                    <input
                      id="txtCode"
                      type="text"
                      class="form-control"
                      placeholder="Código"
                      formControlName="code"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="txtName" class="form-label">Nombre (*)</label>
                    <input
                      id="txtName"
                      type="text"
                      class="form-control"
                      placeholder="Nombre"
                      formControlName="name"
                    />
                  </div>
                  <div class="col-md-3" formGroupName="anp">
                    <label for="ddAnp" class="form-label">ANP (*)</label>
                    <select
                      id="ddAnp"
                      class="form-select"
                      formControlName="id"
                      [ngClass]="{
                        'input-invalid':
                          submitted && form.get('anp.id').errors?.min
                      }"
                    >
                      <!-- (submitted &&
                          alliedForm.get('anp.id').errors?.pattern) -->
                      <option value="0">SELECCIONE</option>
                      <option *ngFor="let item of anpList" [value]="item.id">
                        {{ item.fullName }}
                      </option>
                    </select>
                    <!-- <ng-select
                    [items]="anp"
                    bindLabel="anpNomb"
                    bindValue="anpId"
                    [searchable]="true"
                    formControlName="anp"
                    placeholder="SELECCIONE">
                  </ng-select>-->
                  </div>
                  <div class="col-md-3">
                    <div formGroupName="agreementState">
                      <label for="ddState" class="form-label">Estado (*)</label>
                      <select
                        id="ddState"
                        class="form-select"
                        formControlName="id"
                        [ngClass]="{
                          'input-invalid':
                            submitted &&
                            form.get('agreementState.id').errors?.min
                        }"
                      >
                        <option selected value="0">SELECCIONE</option>
                        <option
                          *ngFor="let item of agreementStateList"
                          [value]="item.id"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label for="txtSuscriptionDate" class="form-label"
                      >Fecha de suscripción (*)</label
                    >
                    <input
                      type="date"
                      class="form-control"
                      id="txtSuscriptionDate"
                      formControlName="firm"
                    />
                  </div>
                  <div class="col-md-3">
                    <label class="form-label" for="numbValidity"
                      >Vigencia en años (*)</label
                    >
                    <input
                      type="number"
                      id="numbValidity"
                      class="form-control"
                      min="0"
                      formControlName="vigency"
                      [ngClass]="{
                        'input-invalid':
                          (submitted && form.get('vigency').errors?.required) ||
                          (submitted && form.get('vigency').errors?.min)
                      }"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="txtaGoal" class="form-label"
                      >Objetivo general</label
                    >
                    <textarea
                      id="txtaGoal"
                      class="form-control"
                      formControlName="genObj"
                      rows="2"
                    ></textarea>
                  </div>
                  <div class="col-md-6">
                    <label for="txtaObs" class="form-label"
                      >Observaciones
                    </label>
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Observaciones/comentarios adicionales a considerar en relación al AdC"
                    ></i>
                    <textarea
                      id="txtaObs"
                      class="form-control"
                      rows="2"
                      formControlName="description"
                    ></textarea>
                  </div>
                  <div class="col-md-3">
                    <div>
                      <label for="ddlDepartment" class="form-label"
                        >Departamento (*)</label
                      >
                      <select
                        placeholder="SELECCIONE"
                        id="ddlDepartment"
                        class="form-select"
                        (change)="searchProvinces($event.target.value)"
                        formControlName="department"
                        [ngClass]="{
                          'input-invalid':
                            submitted && form.get('department').errors?.min
                        }"
                      >
                        <option selected value="0">SELECCIONE</option>
                        <option
                          *ngFor="let item of departments"
                          [value]="item.code"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div>
                      <label for="ddlProvince" class="form-label"
                        >Provincia (*)</label
                      >
                      <select
                        id="ddlProvince"
                        class="form-select"
                        (change)="searchDistricts($event.target.value)"
                        formControlName="province"
                        [ngClass]="{
                          'input-invalid':
                            submitted && form.get('province').errors?.min
                        }"
                      >
                        <option selected value="0">SELECCIONE</option>
                        <option
                          *ngFor="let item of provinces"
                          [value]="item.code"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <div>
                      <label for="ddlProvince" class="form-label"
                        >Distrito (*)</label
                      >
                      <select
                        id="ddlProvince"
                        class="form-select"
                        formControlName="district"
                        [ngClass]="{
                          'input-invalid':
                            submitted && form.get('district').errors?.min
                        }"
                      >
                        <option selected value="0">SELECCIONE</option>
                        <option
                          *ngFor="let item of districts"
                          [value]="item.code"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label for="txtLocalization" class="form-label"
                      >Localización (*)</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="txtLocalization"
                      formControlName="localization"
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Articulaciones</label>
                <button
                  type="submit"
                  class="btn btn-sm btn-outline-success mx-2"
                  [disabled]="disabled"
                >
                  <i class="bi bi-save"></i>
                  Guardar
                </button>
              </div>
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-3">
                    <div class="form-check form-switch form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="chkArticulated"
                        formControlName="hasMasterPlan"
                      />
                      <label for="chkArticulated" class="form-label"
                        >Plan maestro (*)</label>
                    </div>
                    <div class="form-check form-switch form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="chkLocalDevelopment"
                        formControlName="hasDevelopmentPlan"
                      />
                      <label class="form-check-label" for="chkLocalDevelopment"
                        >Plan de desarrollo local</label>
                    </div>
                    <div class="">
                      <label for="detalle" class="form-label"
                        >Detalle del/los municipios del ADC</label
                      >
                      <input type="text" formControlName="detailMunicipality"
                      class="form-control" id="detalle" />
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">Plan de vida de las comunidades</label>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="livePlan"
                        value=1 formControlName="livePlan" id="yes"
                      />
                      <label class="form-check-label" for="yes">Sí</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="livePlan"
                        value=2 formControlName="livePlan" id="not"
                      />
                      <label class="form-check-label" for="not">No</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="livePlan"
                        value=3 formControlName="livePlan"id="notApply"/>
                      <label class="form-check-label" for="notApply">No aplica</label>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">Plan de vida institucional (ECA)</label>
                    <div class="form-check">
                      <input class="form-check-input" type="radio" name="institutionalPlan"
                        value=1 formControlName="institutionalPlan" id="ecaYes"
                      />
                      <label class="form-check-label" for="ecaYes">Sí</label>
                    </div>

                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="institutionalPlan"
                        value=2 formControlName="institutionalPlan" id="ecaNot"
                      />
                      <label class="form-check-label" for="ecaNot">No</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="institutionalPlan"
                        value=3 formControlName="institutionalPlan" id="ecanotApply"
                      />
                      <label class="form-check-label" for="ecanotApply">No aplica</label>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <label class="form-label">Zonificación Forestal</label>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="forestZoning"
                        value=1 formControlName="forestZoning" id="zonningYes"
                      />
                      <label class="form-check-label" for="zonningYes">Sí</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="forestZoning"
                        value=2 formControlName="forestZoning" id="zonningNot"
                      />
                      <label class="form-check-label" for="zonningNot">No</label>
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input" type="radio" name="forestZoning"
                        value=3 formControlName="forestZoning" id="zonningNotApply"
                      />
                      <label class="form-check-label" for="zonningNotApply">No aplica</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Suscriptores</label>
                <button
                  type="button"
                  class="btn btn-sm btn-outline-primary mx-2"
                  (click)="onAddAlliedModal(contentAddAllied)"
                  [disabled]="!agreementExist"
                >
                  <i class="bi bi-plus-lg"></i>
                  Agregar Suscriptores
                </button>
              </div>
              <div class="card-body" id="subscribers">
                <div class="row g-3">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body" id="parent">
                        <div class="row g-3">
                          <!-- <div class="col-md-6">
                            <label class="form-label"
                              >Agregar Suscriptores</label
                            >
                            <button
                              type="button"
                              class="btn btn-sm btn-primary d-flex"
                              placement="top"
                              (click)="onAddAlliedModal(contentAddAllied)"
                            >
                              <i class="bi bi-plus-lg"></i>
                            </button>
                          </div> -->
                        </div>
                        <!-- <hr /> -->
                        <div class="table-responsive">
                          <table class="table">
                            <thead class="fw-bold">
                              <tr>
                                <td>Nombre</td>
                                <td>Categoría</td>
                                <td>Opciones</td>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let item of alliedList">
                                <td>{{ item.name }}</td>
                                <td>{{ item.alliedCategory.name }}</td>
                                <td>
                                  <div class="text-nowrap">
                                    <button
                                      type="button"
                                      class="
                                        btn btn-sm btn-outline-danger
                                        border-0
                                      "
                                      (click)="
                                        onDeleteAlliedModal(
                                          contentAlliedDelete,
                                          item.id
                                        )
                                      "
                                    >
                                      <i class="bi bi-trash fs-lg"></i>
                                    </button>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Compromisos</label>
                <div>
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-primary mx-2"
                    (click)="
                      onContentCreateCommitmentsModal(contentCreateCommitments)
                    "
                    [disabled]="!agreementExist"
                  >
                    <i class="bi bi-plus-lg"></i>
                    Agregar compromisos
                  </button>
                  &nbsp;
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-primary mx-2"
                    [disabled]="!agreementExist"
                    (click)="exportAsXLSX()"
                  >
                    <i class="bi bi-file-earmark-excel"></i>
                    Exportar Excel
                  </button>
                </div>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-12">
                    <form action="#" [formGroup]="form" novalidate>
                      <div class="card">
                        <div class="card-body" id="parent">
                          <div class="row g-3">
                            <!-- <div class="col-md-6">
                              <label class="form-label"
                                >Agregar compromisos</label
                              >
                              <button
                                type="button"
                                class="btn btn-sm btn-primary d-flex"
                                (click)="
                                  onContentCreateCommitmentsModal(
                                    contentCreateCommitments
                                  )
                                "
                              >
                                <i class="bi bi-plus-lg"></i>
                              </button>
                            </div> -->
                          </div>
                          <!-- <hr /> -->
                          <div class="table-responsive">
                            <table class="table">
                              <thead class="fw-bold">
                                <tr>
                                  <td>Objetivo</td>
                                  <td>Compromiso</td>
                                  <td>Línea de Acción</td>
                                  <td>Suscriptor</td>
                                  <td>Opciones</td>
                                </tr>
                              </thead>
                              <tbody>
                                <tr
                                  *ngFor="
                                    let item of commitmentsList;
                                    index as idx
                                  "
                                >
                                  <td>
                                    {{ item.actionLine.objetive.description }}
                                  </td>
                                  <td>
                                    {{ item.description }}
                                  </td>
                                  <td>
                                    {{ item.actionLine.name }}
                                  </td>
                                  <td>
                                    {{ item.allied.name }}
                                  </td>
                                  <td>
                                    <div class="text-nowrap">
                                      <button
                                        type="button"
                                        class="
                                          btn btn-sm btn-outline-danger
                                          border-0
                                        "
                                        (click)="
                                          onDeleteCommitmentsModal(
                                            contentCommitmentsDelete,
                                            item.id
                                          )
                                        "
                                      >
                                        <i class="bi bi-trash fs-lg"></i>
                                      </button>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold"
                  >Alineamiento con instrumentos de planificación</label
                >
                <div>
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-primary mx-2"
                    (click)="
                      onContentCreateCommitmentsExternalModal(
                        contentCreateCommitmentsExternal
                      )
                    "
                    [disabled]="!agreementExist"
                  >
                    <i class="bi bi-plus-lg"></i>
                    Agregar compromisos
                  </button>
                  &nbsp;
                  <!-- <button
                    type="button"
                    class="btn btn-sm btn-outline-primary mx-2"
                    [disabled]="!agreementExist"
                    (click)="exportAsXLSX()"
                  >
                    <i class="bi bi-file-earmark-excel"></i>
                    Exportar Excel
                  </button> -->
                </div>
              </div>
              <div class="card-body">
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-body" id="parent">
                        <div class="row g-3">
                          <!-- <div class="col-md-6">
                              <label class="form-label"
                                >Agregar compromisos</label
                              >
                              <button
                                type="button"
                                class="btn btn-sm btn-primary d-flex"
                                (click)="
                                  onContentCreateCommitmentsModal(
                                    contentCreateCommitments
                                  )
                                "
                              >
                                <i class="bi bi-plus-lg"></i>
                              </button>
                            </div> -->
                        </div>
                        <!-- <hr /> -->
                        <div class="table-responsive">
                          <table class="table">
                            <thead class="fw-bold">
                              <tr>
                                <td>Objetivo</td>
                                <td>Compromiso</td>
                                <td>Línea de Acción</td>
                                <td>Opciones</td>
                              </tr>
                            </thead>
                            <tbody>
                              <tr
                                *ngFor="
                                  let item of commitmentsListExternal;
                                  index as idx
                                "
                              >
                                <td>
                                  {{ item.objetive }}
                                </td>
                                <td>
                                  {{ item.description }}
                                </td>
                                <td>
                                  {{ item.actionLine }}
                                </td>
                                <td>
                                  <div class="text-nowrap">
                                    <button
                                      type="button"
                                      class="
                                        btn btn-sm btn-outline-danger
                                        border-0
                                      "
                                      (click)="
                                        onDeleteCommitmentsExternalModal(
                                          contentCommitmentsExternalDelete,
                                          item.id
                                        )
                                      "
                                    >
                                      <i class="bi bi-trash fs-lg"></i>
                                    </button>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Beneficiarios</label>
                <button
                  type="submit"
                  class="btn btn-sm btn-outline-success mx-2"
                  [disabled]="disabled"
                >
                  <i class="bi bi-save"></i>
                  Guardar
                </button>
              </div>
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-4">
                    <label class="form-label">Número de participantes </label
                    ><i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Número de personas  participando del AdC"
                    ></i>
                    <div class="input-group">
                      <span class="input-group-text">H</span>
                      <input
                        type="number"
                        min="0"
                        id="numbMenQ"
                        class="form-control"
                        formControlName="partMen"
                      />
                      <span class="input-group-text">M</span>
                      <input
                        type="number"
                        min="0"
                        id="numbWomanQ"
                        class="form-control"
                        formControlName="partWomen"
                      />
                      <span class="input-group-text">Total</span>
                      <input
                        type="number"
                        min="0"
                        id="numbTotal"
                        class="form-control"
                        formControlName="numPart"
                      />
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="txtaDetailB" class="form-label"
                      >Detalle del beneficiario</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Para el registro de beneficiarios a nivel de hombres y mujeres, se debe considerar el porcentaje de hombres y mujeres en función al último Censo Nacional, y de no existir se puede considerar una estimación a nivel de porcentaje. Ejemplo: 60% de varones y 40% de mujeres."
                    ></i>
                    <textarea
                      id="txtaDetailB"
                      class="form-control"
                      rows="1"
                      formControlName="benPerson"
                    ></textarea>
                  </div>
                  <div class="col-md-4">
                    <label for="numFamily" class="form-label"
                      >Número de familias beneficiadas</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Número de familias beneficiadas (según el AdC firmado)"
                    ></i>
                    <input
                      type="number"
                      min="0"
                      class="form-control"
                      id="numFamily"
                      formControlName="numFamily"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="txtaDetailBF" class="form-label"
                      >Detalle del beneficiario familia</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Precisar si estas familias pertenecen a un sector o cuenca específica de una comunidad o grupo poblacional específico. Ejemplo: 15 familias de productores pertenecientes a la Asociación de Productores PERSEMAX."
                    ></i>
                    <textarea
                      id="txtaDetailBF"
                      class="form-control"
                      rows="1"
                      formControlName="benFamily"
                    ></textarea>
                  </div>
                  <div class="col-md-6">
                    <label for="benIndirect" class="form-label"
                      >Beneficiarios indirectos</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="En beneficiarios indirectos se puede considerar: población PIACI, el ANP, ECA, población aledaña de un sector o comunidad, entre otros."
                    ></i>
                    <textarea
                      id="benIndirect"
                      class="form-control"
                      rows="1"
                      formControlName="benIndirect"
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Ámbito</label>
                <div class="float-right">
                  <button
                    type="submit"
                    class="btn btn-sm btn-outline-success mx-2"
                    [disabled]="disabled"
                  >
                    <i class="bi bi-save"></i>
                    Guardar
                  </button>
                  <!-- <button
                    type="button"
                    class="btn btn-sm btn-outline-success mx-1"
                    (click)="addFeatureToService()"
                    [disabled]="!agreementExist"
                    [disabled]="disabled"
                  >
                
                    <span
                      *ngIf="disabled"
                      class="spinner-border spinner-border-sm"
                      role="status"
                      aria-hidden="true"
                    ></span>
                    Guardar Shapefiles
                  </button> -->
                </div>
              </div>
              <div class="card-body">
                <ul
                  class="nav nav-tabs nav-tabs-flat"
                  id="myTab"
                  role="tablist"
                >
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link active"
                      id="datos-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#tabDatos"
                      type="button"
                      role="tab"
                    >
                      Datos
                    </button>
                  </li>
                  <li class="nav-item" role="presentation">
                    <button
                      class="nav-link"
                      id="mapa-tab"
                      data-bs-toggle="tab"
                      data-bs-target="#tabMapa"
                      type="button"
                      role="tab"
                    >
                      Previsualización
                    </button>
                  </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                  <div
                    class="tab-pane pt-2 fade show active"
                    id="tabDatos"
                    role="tabpanel"
                    aria-labelledby="datos-tab"
                  >
                    <div class="row g-3">
                      <div class="col-md-3">
                        <label for="numbScope" class="form-label"
                          >Ámbito del ADC (Ha)</label
                        >
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="El ámbito del acuerdo de conservación debe ser la sumatoria de: superficie productiva, superficie bajo restauración, superficie del sector o sectores de vigilancia y control."
                        ></i>
                        <div class="input-group">
                          <input
                            type="number"
                            min="0"
                            class="form-control"
                            id="numbScope"
                            formControlName="areaAmbitc"
                          />
                          <span class="input-group-text">Ha</span>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="numbProductiveA" class="form-label"
                          >Superficie de intervención (Ha)</label
                        >
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="Superficie bajo manejo productivo"
                        ></i>
                        <div class="input-group">
                          <input
                            type="number"
                            min="0"
                            class="form-control"
                            id="numbProductiveA"
                            formControlName="producedArea"
                          />
                          <span class="input-group-text">Ha</span>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="numbInterventionA" class="form-label"
                          >Ubicacion Superficie de intervención</label
                        >
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="interior, zona de amortiguamiento o paisaje asociado"
                        ></i>
                        <input
                          type="text"
                          class="form-control"
                          id="surfaceIntervention"
                          formControlName="surfaceIntervention"
                        />
                      </div>
                      <div class="col-md-3">
                        <label for="detalleProduction" class="form-label"
                          >Detalle superficie intervención
                        </label>
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="Precisar si la superficie productiva corresponde a una línea productiva en específica; por ejemplo: 20 Ha de café y 5 Ha de achiote, o de manera general; peces amazónicos, actividad maderera, turismo, entre otros."
                        ></i>
                        <textarea
                          id="detalleProduction"
                          class="form-control"
                          rows="1"
                          formControlName="detailProduction"
                        ></textarea>
                      </div>
                      <div class="col-md-3">
                        <label for="restHect" class="form-label"
                          >Superficie bajo restauración (Ha)</label
                        >
                        <div class="input-group">
                          <input
                            type="number"
                            min="0"
                            class="form-control"
                            id="restHect"
                            formControlName="restHect"
                          />
                          <span class="input-group-text">Ha</span>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="txtaIndirectB" class="form-label"
                          >Detalle ámbito bajo restauración</label
                        >
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="Ejemplo: 15 Ha a reforestar."
                        ></i>
                        <textarea
                          id="txtaDetailAR"
                          class="form-control"
                          rows="1"
                          formControlName="restdet"
                        ></textarea>
                      </div>
                      <div class="col-md-3">
                        <label for="txtaSectorVC" class="form-label"
                          >Nombre(s) del(os) sector(es) de V y C
                        </label>
                        <textarea
                          id="txtaSectorVC"
                          class="form-control"
                          rows="1"
                          formControlName="sectNom"
                        ></textarea>
                      </div>
                      <div class="col-md-3">
                        <label for="numbAreaVC" class="form-label"
                          >Superficie del(os) sector(es) de V y C (Ha)</label
                        >
                        <div class="input-group">
                          <input
                            type="number"
                            min="0"
                            class="form-control"
                            id="numbAreaVC"
                            formControlName="sectHect"
                          />
                          <span class="input-group-text">Ha</span>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <label for="txtaDetailSVC" class="form-label"
                          >Detalle del (de los) sectores de vigilancia y control
                        </label>
                        <i
                          class="bi bi-info-circle mx-1"
                          placement="top"
                          ngbTooltip="Ejemplo: Sector Y donde 250 Ha están al interior del ANP y 100 Ha en ZA."
                        ></i>
                        <textarea
                          id="txtaDetailSVC"
                          class="form-control"
                          rows="1"
                          formControlName="sectDet"
                        ></textarea>
                      </div>
                      <div class="col-md-3">
                        <label for="txtaModeAdc" class="form-label"
                          >Modalidad de gestión del territorio en el ADC
                          <i
                            class="bi bi-info-circle mx-1"
                            placement="top"
                            ngbTooltip="Puede considerarse otra modalidad de gestión del territorio que se implementa en el AdC siendo estos: Plan de Desarrollo Local Concertado, Plan Maestro del ANP, Plan de Vida de las CCNN, Plan de Vida Institucional del ECA, entre otros."
                          ></i>
                        </label>

                        <textarea
                          id="txtaModeAdc"
                          class="form-control"
                          rows="1"
                          formControlName="territoryMod"
                        ></textarea>
                      </div>
                      <div class="col-md-3">
                        <label for="surfaceAmbito" class="form-label"
                          >Superficie del Ámbito de control</label
                        >
                        <div class="input-group">
                          <input
                            type="number"
                            min="0"
                            class="form-control"
                            id="surfaceAmbito"
                            formControlName="surfaceAmbito"
                          />
                          <span class="input-group-text">Ha</span>
                        </div>
                      </div>
                      <div class="col-md-3 d-none">
                        <div class="mb-3">
                          <label for="fileEnviromentArea" class="form-label"
                            >Área del ámbito</label
                          >
                          <input
                            class="form-control"
                            type="file"
                            id="fileEnviromentArea"
                          />
                        </div>
                      </div>
                      <div class="col-md-3 d-none">
                        <div class="mb-3">
                          <label for="fileSurveillanceArea" class="form-label"
                            >Área de vigilancia</label
                          >
                          <input
                            class="form-control"
                            type="file"
                            id="fileSurveillanceArea"
                          />
                        </div>
                      </div>
                      <div class="col-md-3 d-none">
                        <div class="mb-3">
                          <label for="formFile" class="form-label"
                            >Área de restauración</label
                          >
                          <input
                            class="form-control"
                            type="file"
                            id="formFile"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                  <div
                    class="tab-pane pt-2 fade"
                    id="tabMapa"
                    role="tabpanel"
                    aria-labelledby="mapa-tab"
                  >
                    <div class="card">
                      <div class="card-body">
                        <div class="row g-3">
                          <div class="col-md-8">
                            <app-base-map
                              [mapProperties]="mapProperties"
                              [mapViewProperties]="mapViewProperties"
                              [maxHeight]="400"
                              (mapInit)="onMapInit($event)"
                            >
                            </app-base-map>
                          </div>
                          <div class="col-md-4">
                            <div class="form-group">
                              <div class="form-check form-check-inline">
                                <input
                                  class="form-check-input"
                                  type="radio"
                                  name="geometryType"
                                  id="ambitPolygon"
                                  (change)="activateMonitoring($event)"
                                  value="polygon"
                                  checked
                                />
                                <label
                                  class="form-check-label"
                                  for="ambitPolygon"
                                >
                                  Polígono
                                </label>
                              </div>
                              <div class="form-check form-check-inline">
                                <input
                                  class="form-check-input"
                                  type="radio"
                                  name="geometryType"
                                  id="ambitPoint"
                                  (change)="activateMonitoring($event)"
                                  value="point"
                                />
                                <label
                                  class="form-check-label"
                                  for="ambitPoint"
                                >
                                  Punto
                                </label>
                              </div>
                            </div>
                            <div *ngIf="isPolygon">
                              <ul
                                class="nav nav-tabs nav-tabs-flat"
                                id="tabPolygon"
                                role="tablist"
                              >
                                <li class="nav-item" role="presentation">
                                  <button
                                    class="nav-link active"
                                    id="ambAgreementPolygon-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#tabAgreementPolygon"
                                    type="button"
                                    role="tab"
                                  >
                                    Ámbito del AC
                                  </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button
                                    class="nav-link"
                                    id="ambProduced-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#tabProduced"
                                    type="button"
                                    role="tab"
                                  >
                                    Ámbito productivo
                                  </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button
                                    class="nav-link"
                                    id="ambRestauration-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#tabRestauration"
                                    type="button"
                                    role="tab"
                                  >
                                    Ámbito restauración
                                  </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                  <button
                                    class="nav-link"
                                    id="ambVigilance-tab"
                                    data-bs-toggle="tab"
                                    data-bs-target="#tabVigilance"
                                    type="button"
                                    role="tab"
                                  >
                                    Ámbito Vigilancia y C
                                  </button>
                                </li>
                              </ul>
                              <div class="tab-content" id="myTabContentPolygon">
                                <ngx-spinner
                                  [fullScreen]="false"
                                  type="ball-clip-rotate"
                                  size="medium"
                                >
                                </ngx-spinner>
                                <div
                                  class="tab-pane pt-2 fade show active"
                                  id="tabAgreementPolygon"
                                  role="tabpanel"
                                  aria-labelledby="agreement-tab"
                                >
                                  <div class="form-group row mb-3 mt-2">
                                    <div class="col-md-8">
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode1"
                                          id="shapefile1"
                                          (change)="
                                            changeMode($event, 'polygon1')
                                          "
                                          value="polygon"
                                          checked
                                        />
                                        <label
                                          class="form-check-label"
                                          for="shapefile1"
                                        >
                                          Shapefile
                                        </label>
                                      </div>
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode1"
                                          id="vertix1"
                                          (change)="
                                            changeMode($event, 'point1')
                                          "
                                          value="point"
                                        />
                                        <label
                                          class="form-check-label"
                                          for="vertix1"
                                        >
                                          Vértices
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-4">
                                      <button
                                        class="btn btn-primary btn-sm"
                                        (click)="uploadConservation($event)"
                                        [disabled]="upLoadDisable"
                                      >
                                        <i class="bi bi-cloud-upload"></i>
                                        Subir
                                      </button>
                                    </div>
                                  </div>
                                  <div
                                    class="row mb-3"
                                    *ngIf="geometryMode.polygon1"
                                  >
                                    <label for="formFileSm" class="form-label"
                                      >Carga shapefile del área de
                                      conservación</label
                                    >
                                    <div class="col-md-12">
                                      <form
                                        enctype="multipart/form-data"
                                        method="post"
                                        id="uploadForm1"
                                        (change)="eventFormListener1($event)"
                                      >
                                        <input
                                          class="form-control form-control-sm"
                                          id="formFileSm"
                                          name="file"
                                          type="file"
                                        />
                                      </form>
                                    </div>

                                    <div class="col-md-12">
                                      <span
                                        class="file-upload-status"
                                        style="opacity: 1"
                                        id="upload-status1"
                                      ></span>
                                      <div id="fileInfo1"></div>
                                    </div>
                                  </div>
                                  <div
                                    class="table-responsive tableFixHead"
                                    *ngIf="geometryMode.point1"
                                  >
                                    <table class="table tableCustom">
                                      <thead>
                                        <tr>
                                          <td>Vértice</td>
                                          <td>Este(x)</td>
                                          <td>Norte(y)</td>
                                          <td>Opción</td>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr
                                          *ngFor="
                                            let aPolygon of aPolygons;
                                            index as idx
                                          "
                                        >
                                          <td>{{ idx + 1 }}</td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aPolygon.x"
                                              [(ngModel)]="aPolygon.x"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Este(x)"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aPolygon.y"
                                              [(ngModel)]="aPolygon.y"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Norte(y)"
                                              disabled
                                            />
                                          </td>

                                          <td>
                                            <!-- <button
                                              *ngIf="!field.edit"
                                              class="
                                                btn btn-sm btn-outline-info
                                                border-0
                                              "
                                              type="button"
                                              (click)="editFieldValue(field)"
                                            >
                                              <i class="bi bi-pencil fs-lg"></i>
                                            </button> -->
                                            <!-- <button
                                              *ngIf="field.edit"
                                              class="
                                                btn btn-sm btn-outline-success
                                                border-0
                                              "
                                              type="button"
                                              (click)="saveFieldValue(field, i)"
                                            >
                                              <i class="bi bi-check-lg"></i>
                                            </button> -->
                                            <button
                                              class="
                                                btn btn-sm btn-outline-danger
                                                border-0
                                              "
                                              type="button"
                                              (click)="deleteApolygonValue(i)"
                                            >
                                              <i
                                                class="bi bi-dash-square fs-lg"
                                              ></i>
                                            </button>
                                          </td>
                                        </tr>
                                        <tr>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeX"
                                              [(ngModel)]="newAttributeA.x"
                                              name="newAttributeAPolygon"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeY"
                                              [(ngModel)]="newAttributeA.y"
                                              name="newAttributeAPolygon"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <div class="text-nowrap">
                                              <button
                                                type="button"
                                                class="
                                                  btn btn-sm btn-outline-success
                                                  border-0
                                                "
                                                (click)="addApolygonValue()"
                                              >
                                                <i
                                                  class="
                                                    bi bi-plus-square
                                                    fs-lg
                                                  "
                                                ></i>
                                              </button>
                                            </div>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <div
                                  class="tab-pane pt-2 fade"
                                  id="tabProduced"
                                  role="tabpanel"
                                  aria-labelledby="produced-tab"
                                >
                                  <div class="form-group row mb-3 mt-2">
                                    <div class="col-md-8">
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode2"
                                          id="shapefile2"
                                          (change)="
                                            changeMode($event, 'polygon2')
                                          "
                                          value="polygon"
                                          checked
                                        />
                                        <label
                                          class="form-check-label"
                                          for="shapefile2"
                                        >
                                          Shapefile
                                        </label>
                                      </div>
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode2"
                                          id="vertix2"
                                          (change)="
                                            changeMode($event, 'point2')
                                          "
                                          value="point"
                                        />
                                        <label
                                          class="form-check-label"
                                          for="vertix2"
                                        >
                                          Vértices
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-4">
                                      <button
                                        class="btn btn-primary btn-sm"
                                        (click)="uploadConservation($event)"
                                        [disabled]="upLoadDisable"
                                      >
                                        <i class="bi bi-cloud-upload"></i>
                                        Subir
                                      </button>
                                    </div>
                                  </div>
                                  <div
                                    class="row mb-3"
                                    *ngIf="geometryMode.polygon2"
                                  >
                                    <label for="formFileSm" class="form-label"
                                      >Carga shapefile del area
                                      productiva</label
                                    >
                                    <div class="col-md-12">
                                      <form
                                        enctype="multipart/form-data"
                                        method="post"
                                        id="uploadForm2"
                                        (change)="eventFormListener2($event)"
                                      >
                                        <input
                                          class="form-control form-control-sm"
                                          id="formFileProduced"
                                          type="file"
                                          name="file"
                                        />
                                      </form>
                                    </div>

                                    <div class="col-md-12">
                                      <span
                                        class="file-upload-status"
                                        style="opacity: 1"
                                        id="upload-status2"
                                      ></span>
                                      <div id="fileInfo2"></div>
                                    </div>
                                  </div>
                                  <div
                                    class="table-responsive tableFixHead"
                                    *ngIf="geometryMode.point2"
                                  >
                                    <table class="table tableCustom">
                                      <thead>
                                        <tr>
                                          <td>Vértice</td>
                                          <td>Este(x)</td>
                                          <td>Norte(y)</td>
                                          <td>Opción</td>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr
                                          *ngFor="
                                            let aProduced of aProduceds;
                                            index as idx
                                          "
                                        >
                                          <td>{{ idx + 1 }}</td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aProduced.x"
                                              [(ngModel)]="aProduced.x"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Este(x)"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aProduced.y"
                                              [(ngModel)]="aProduced.y"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Norte(y)"
                                              disabled
                                            />
                                          </td>

                                          <td>
                                            <!-- <button
                                            *ngIf="!field.edit"
                                            class="
                                              btn btn-sm btn-outline-info
                                              border-0
                                            "
                                            type="button"
                                            (click)="editFieldValue(field)"
                                          >
                                            <i class="bi bi-pencil fs-lg"></i>
                                          </button> -->
                                            <!-- <button
                                            *ngIf="field.edit"
                                            class="
                                              btn btn-sm btn-outline-success
                                              border-0
                                            "
                                            type="button"
                                            (click)="saveFieldValue(field, i)"
                                          >
                                            <i class="bi bi-check-lg"></i>
                                          </button> -->
                                            <button
                                              class="
                                                btn btn-sm btn-outline-danger
                                                border-0
                                              "
                                              type="button"
                                              (click)="deleteProducedValue(i)"
                                            >
                                              <i
                                                class="bi bi-dash-square fs-lg"
                                              ></i>
                                            </button>
                                          </td>
                                        </tr>
                                        <tr>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributePX"
                                              [(ngModel)]="newAttributeAP.x"
                                              name="newAttributeAProduced"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeY"
                                              [(ngModel)]="newAttributeAP.y"
                                              name="newAttributeAProduced"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <div class="text-nowrap">
                                              <button
                                                type="button"
                                                class="
                                                  btn btn-sm btn-outline-success
                                                  border-0
                                                "
                                                (click)="addProducedValue()"
                                              >
                                                <i
                                                  class="
                                                    bi bi-plus-square
                                                    fs-lg
                                                  "
                                                ></i>
                                              </button>
                                            </div>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <div
                                  class="tab-pane pt-2 fade"
                                  id="tabRestauration"
                                  role="tabpanel"
                                  aria-labelledby="restauration-tab"
                                >
                                  <div class="form-group row mb-3 mt-2">
                                    <div class="col-md-8">
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode3"
                                          id="shapefile3"
                                          (change)="
                                            changeMode($event, 'polygon3')
                                          "
                                          value="polygon"
                                          checked
                                        />
                                        <label
                                          class="form-check-label"
                                          for="shapefile3"
                                        >
                                          Shapefile
                                        </label>
                                      </div>
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode3"
                                          id="vertix3"
                                          (change)="
                                            changeMode($event, 'point3')
                                          "
                                          value="point"
                                        />
                                        <label
                                          class="form-check-label"
                                          for="vertix3"
                                        >
                                          Vértices
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-4">
                                      <button
                                        class="btn btn-primary btn-sm"
                                        (click)="uploadConservation($event)"
                                        [disabled]="upLoadDisable"
                                      >
                                        <i class="bi bi-cloud-upload"></i>
                                        Subir
                                      </button>
                                    </div>
                                  </div>
                                  <div
                                    class="row mb-3"
                                    *ngIf="geometryMode.polygon3"
                                  >
                                    <label for="formFileSm" class="form-label"
                                      >Carga shapefile Area de
                                      restauración</label
                                    >
                                    <div class="col-md-12">
                                      <form
                                        enctype="multipart/form-data"
                                        method="post"
                                        id="uploadForm3"
                                        (change)="eventFormListener3($event)"
                                      >
                                        <input
                                          class="form-control form-control-sm"
                                          id="formFileConservation"
                                          type="file"
                                          name="file"
                                        />
                                      </form>
                                    </div>

                                    <div class="col-md-12">
                                      <span
                                        class="file-upload-status"
                                        style="opacity: 1"
                                        id="upload-status3"
                                      ></span>
                                      <div id="fileInfo3"></div>
                                    </div>
                                  </div>
                                  <div
                                    class="table-responsive tableFixHead"
                                    *ngIf="geometryMode.point3"
                                  >
                                    <table class="table tableCustom">
                                      <thead>
                                        <tr>
                                          <td>Vértice</td>
                                          <td>Este(x)</td>
                                          <td>Norte(y)</td>
                                          <td>Opción</td>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr
                                          *ngFor="
                                            let aConservation of aConservations;
                                            index as idx
                                          "
                                        >
                                          <td>{{ idx + 1 }}</td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aConservation.x"
                                              [(ngModel)]="aConservation.x"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Este(x)"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aConservation.y"
                                              [(ngModel)]="aConservation.y"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Norte(y)"
                                              disabled
                                            />
                                          </td>

                                          <td>
                                            <!-- <button
                                          *ngIf="!field.edit"
                                          class="
                                            btn btn-sm btn-outline-info
                                            border-0
                                          "
                                          type="button"
                                          (click)="editFieldValue(field)"
                                        >
                                          <i class="bi bi-pencil fs-lg"></i>
                                        </button> -->
                                            <!-- <button
                                          *ngIf="field.edit"
                                          class="
                                            btn btn-sm btn-outline-success
                                            border-0
                                          "
                                          type="button"
                                          (click)="saveFieldValue(field, i)"
                                        >
                                          <i class="bi bi-check-lg"></i>
                                        </button> -->
                                            <button
                                              class="
                                                btn btn-sm btn-outline-danger
                                                border-0
                                              "
                                              type="button"
                                              (click)="
                                                deleteConservationValue(i)
                                              "
                                            >
                                              <i
                                                class="bi bi-dash-square fs-lg"
                                              ></i>
                                            </button>
                                          </td>
                                        </tr>
                                        <tr>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeCX"
                                              [(ngModel)]="newAttributeAC.x"
                                              name="newAttributeAConservation"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeY"
                                              [(ngModel)]="newAttributeAC.y"
                                              name="newAttributeAConservation"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <div class="text-nowrap">
                                              <button
                                                type="button"
                                                class="
                                                  btn btn-sm btn-outline-success
                                                  border-0
                                                "
                                                (click)="addConservationValue()"
                                              >
                                                <i
                                                  class="
                                                    bi bi-plus-square
                                                    fs-lg
                                                  "
                                                ></i>
                                              </button>
                                            </div>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                                <div
                                  class="tab-pane pt-2 fade"
                                  id="tabVigilance"
                                  role="tabpanel"
                                  aria-labelledby="vigilance-tab"
                                >
                                  <div class="form-group row mb-3 mt-2">
                                    <div class="col-md-8">
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode4"
                                          id="shapefile4"
                                          (change)="
                                            changeMode($event, 'polygon4')
                                          "
                                          value="polygon"
                                          checked
                                        />
                                        <label
                                          class="form-check-label"
                                          for="shapefile1"
                                        >
                                          Shapefile
                                        </label>
                                      </div>
                                      <div class="form-check form-check-inline">
                                        <input
                                          class="form-check-input"
                                          type="radio"
                                          name="geometryMode4"
                                          id="vertix4"
                                          (change)="
                                            changeMode($event, 'point4')
                                          "
                                          value="point"
                                        />
                                        <label
                                          class="form-check-label"
                                          for="vertix4"
                                        >
                                          Vértices
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-md-4">
                                      <button
                                        class="btn btn-primary btn-sm"
                                        (click)="uploadConservation($event)"
                                        [disabled]="upLoadDisable"
                                      >
                                        <i class="bi bi-cloud-upload"></i>
                                        Subir
                                      </button>
                                    </div>
                                  </div>
                                  <div
                                    class="row mb-3"
                                    *ngIf="geometryMode.polygon4"
                                  >
                                    <label for="formFileSm" class="form-label"
                                      >Carga shapefile Area de vigilancia y
                                      control</label
                                    >
                                    <div class="col-md-12">
                                      <form
                                        enctype="multipart/form-data"
                                        method="post"
                                        id="uploadForm4"
                                        (change)="eventFormListener4($event)"
                                      >
                                        <input
                                          class="form-control form-control-sm"
                                          id="formFileVigilance"
                                          type="file"
                                          name="file"
                                        />
                                      </form>
                                    </div>

                                    <div class="col-md-12">
                                      <span
                                        class="file-upload-status"
                                        style="opacity: 1"
                                        id="upload-status4"
                                      ></span>
                                      <div id="fileInfo4"></div>
                                    </div>
                                  </div>
                                  <div
                                    class="table-responsive tableFixHead"
                                    *ngIf="geometryMode.point4"
                                  >
                                    <table class="table tableCustom">
                                      <thead>
                                        <tr>
                                          <td>Vértice</td>
                                          <td>Este(x)</td>
                                          <td>Norte(y)</td>
                                          <td>Opción</td>
                                        </tr>
                                      </thead>
                                      <tbody>
                                        <tr
                                          *ngFor="
                                            let aVigilance of aVigilances;
                                            index as idx
                                          "
                                        >
                                          <td>{{ idx + 1 }}</td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aVigilance.x"
                                              [(ngModel)]="aVigilance.x"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Este(x)"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              [value]="aVigilance.y"
                                              [(ngModel)]="aVigilance.y"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                              placeholder="Norte(y)"
                                              disabled
                                            />
                                          </td>

                                          <td>
                                            <!-- <button
                                        *ngIf="!field.edit"
                                        class="
                                          btn btn-sm btn-outline-info
                                          border-0
                                        "
                                        type="button"
                                        (click)="editFieldValue(field)"
                                      >
                                        <i class="bi bi-pencil fs-lg"></i>
                                      </button> -->
                                            <!-- <button
                                        *ngIf="field.edit"
                                        class="
                                          btn btn-sm btn-outline-success
                                          border-0
                                        "
                                        type="button"
                                        (click)="saveFieldValue(field, i)"
                                      >
                                        <i class="bi bi-check-lg"></i>
                                      </button> -->
                                            <button
                                              class="
                                                btn btn-sm btn-outline-danger
                                                border-0
                                              "
                                              type="button"
                                              (click)="deleteVigilanceValue(i)"
                                            >
                                              <i
                                                class="bi bi-dash-square fs-lg"
                                              ></i>
                                            </button>
                                          </td>
                                        </tr>
                                        <tr>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="text"
                                              disabled
                                            />
                                          </td>
                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeAVX"
                                              [(ngModel)]="newAttributeAV.x"
                                              name="newAttributeAVigilance"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <input
                                              class="form-control"
                                              type="number"
                                              id="newAttributeAVY"
                                              [(ngModel)]="newAttributeAV.y"
                                              name="newAttributeAVigilance"
                                              [ngModelOptions]="{
                                                standalone: true
                                              }"
                                            />
                                          </td>

                                          <td>
                                            <div class="text-nowrap">
                                              <button
                                                type="button"
                                                class="
                                                  btn btn-sm btn-outline-success
                                                  border-0
                                                "
                                                (click)="addVigilanceValue()"
                                              >
                                                <i
                                                  class="
                                                    bi bi-plus-square
                                                    fs-lg
                                                  "
                                                ></i>
                                              </button>
                                            </div>
                                          </td>
                                        </tr>
                                      </tbody>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div *ngIf="!isPolygon">
                              <div class="row mb-3">
                                <label for="formFileSm" class="form-label"
                                  >Carga shapefile</label
                                >
                                <div class="col-md-8">
                                  <form
                                    enctype="multipart/form-data"
                                    method="post"
                                    id="uploadForm5"
                                    (change)="eventFormListener5($event)"
                                  >
                                    <input
                                      class="form-control form-control-sm"
                                      id="formFilePoint"
                                      type="file"
                                      name="file"
                                    />
                                  </form>
                                </div>
                                <div class="col-md-4">
                                  <button
                                    class="btn btn-primary btn-sm"
                                    (click)="uploadPoint($event)"
                                  >
                                    <i class="bi bi-cloud-upload"></i>
                                    Subir
                                  </button>
                                </div>
                                <div class="col-md-12">
                                  <span
                                    class="file-upload-status"
                                    style="opacity: 1"
                                    id="upload-status5"
                                  ></span>
                                  <div id="fileInfo5"></div>
                                </div>
                              </div>
                              <div class="input-group mb-3">
                                <span class="input-group-text">Este(x)</span>
                                <input
                                  type="number"
                                  class="form-control"
                                  [(ngModel)]="aPoint.eastx"
                                  [ngModelOptions]="{
                                    standalone: true
                                  }"
                                />
                              </div>

                              <div class="input-group">
                                <span class="input-group-text">Norte(y)</span>
                                <input
                                  type="number"
                                  class="form-control"
                                  [(ngModel)]="aPoint.northy"
                                  [ngModelOptions]="{
                                    standalone: true
                                  }"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Financiamiento</label>

                <button
                  type="submit"
                  class="btn btn-sm btn-outline-success mx-2"
                  [disabled]="disabled"
                >
                  <i class="bi bi-save"></i>
                  Guardar
                </button>
              </div>
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-4">
                    <div class="form-check form-switch form-check-inline mt-2">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="chkComunityL"
                        value="0"
                        formControlName="finanApa"
                        [ngClass]="{
                          'input-invalid':
                            submitted && form.get('finanApa').errors
                        }"
                      />
                      &nbsp;
                      <label
                        class="form-check-label"
                        for="chkComunityL"
                        [ngClass]="{
                          'label-invalid2':
                            submitted && form.get('finanApa').errors
                        }"
                        >Se ha apalancado financiamiento
                      </label>
                      <i
                        class="bi bi-info-circle mx-1"
                        placement="top"
                        ngbTooltip="¿Se ha apalancado financiamiento en el marco del AdC?"
                      ></i>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <label for="numbFinanc" class="form-label"
                      >Financiamiento (Soles)</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="¿A cuánto asciende el financiamiento? "
                    ></i>
                    <input
                      type="number"
                      min="0"
                      class="form-control"
                      id="numbFinanc"
                      formControlName="finanNum"
                    />
                  </div>
                  <div class="col-md-4">
                    <div formGroupName="source">
                      <label for="ddSource" class="form-label"
                        >Fuente de financiamiento (*)</label
                      >
                      <select
                        id="ddSource"
                        class="form-select"
                        formControlName="id"
                      >
                        <option selected value="0">SELECCIONE</option>
                        <option
                          *ngFor="let item of sourceList"
                          [value]="item.id"
                        >
                          {{ item.name }}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <label for="txtModF" class="form-label"
                      >Modalidad de financiamiento</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="txtModF"
                      formControlName="finanMod"
                    />
                  </div>
                  <div class="col-md-6">
                    <label for="txtNameF" class="form-label"
                      >Nombre del fondo</label
                    >
                    <i
                      class="bi bi-info-circle mx-1"
                      placement="top"
                      ngbTooltip="Si aplica "
                    ></i>
                    <input
                      type="text"
                      class="form-control clearable"
                      id="txtNameF"
                      formControlName="fondName" placeholder="Nombre del fondo"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <label class="mb-0 fw-bold">Medios de verificacion</label>
                <button
                  type="submit"
                  class="btn btn-sm btn-outline-success mx-2"
                  [disabled]="disabled"
                >
                  <i class="bi bi-save"></i>
                  Guardar
                </button>
              </div>
              <div class="card-body">
                <div class="row g-3">
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasFirm" formControlName="hasFirm" />
                      <label for="hasFirm" class="form-label">Acuerdo Fimado</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasWorkPlan" formControlName="hasWorkPlan"/>
                      <label class="form-check-label" for="hasWorkPlan">Plan de Trabajo</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasActas" formControlName="hasActas"/>
                      <label class="form-check-label" for="hasActas">Actas/Memorias reuniones previas</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasMap" formControlName="hasMap"/>
                      <label class="form-check-label" for="hasMap">Mapas</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasShape" formControlName="hasShape"/>
                      <label class="form-check-label" for="hasShape">Shapes</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="hasMonitoring" formControlName="hasMonitoring"/>
                      <label class="form-check-label" for="hasMonitoring">Sistema de monitoreo</label>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <div class="form-check form-switch form-check-inline">
                      <input class="form-check-input" type="checkbox" id="allied" formControlName="allied"/>
                      <label class="form-check-label" for="allied">Perteneciente a la marca Aliado</label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="row g-3">
                  <div class="d-flex justify-content-end">
                    <button
                      type="button"
                      class="btn btn-primary"
                      routerLink="/agreement"
                    >
                      <i class="bi bi-arrow-left"></i>
                      Regresar</button
                    >&nbsp;
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End PAge Content -->
  <!-- ============================================================== -->
</div>
<!-- ============================================================== -->
<!-- End Container fluid  -->
<!-- ============================================================== -->

<ng-template #contentAddAllied let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="createPerfilLabel">Crear Suscriptores</h5>
    <button type="button" class="btn-close" (click)="modal.close()"></button>
  </div>
  <form [formGroup]="alliedForm" (ngSubmit)="insertAlliedCategory()">
    <div class="modal-body">
      <div class="row g-3">
        <div class="col-md-3 col-lg-12">
          <label class="form-label">Nombre</label>
          <input
            type="text"
            class="form-control"
            formControlName="name"
            [ngClass]="{
              'input-invalid': submitted && g.name.errors?.required
            }"
          />
        </div>
        <div class="col-md-3 col-lg-12 d-none">
          <label class="form-label">Descripción</label>
          <input
            type="text"
            class="form-control"
            formControlName="description"
          />
        </div>
        <div class="col-md-3 col-lg-12" formGroupName="alliedCategory">
          <label class="form-label">Categoría</label>
          <select
            class="form-select"
            formControlName="id"
            [ngClass]="{
              'input-invalid':
                (submitted &&
                  alliedForm.get('alliedCategory.id').errors?.required) ||
                (submitted &&
                  alliedForm.get('alliedCategory.id').errors?.pattern)
            }"
          >
            <option value="0">SELECCIONE</option>
            <option *ngFor="let item of alliedCategoryList" [value]="item.id">
              {{ item.name }}
            </option>
          </select>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.close()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="disabled">
        Guardar
      </button>
    </div>
  </form>
</ng-template>
<ng-template #contentCreateCommitments let-modal>
  <form
    [formGroup]="formCreateCommitments"
    (ngSubmit)="insertCommitments()"
    novalidate
  >
    <div class="modal-header">
      <h5 class="modal-title" id="createPerfilLabel">Crear Compromisos</h5>
      <button type="button" class="btn-close" (click)="modal.close()"></button>
    </div>
    <div class="modal-body">
      <ul class="nav nav-tabs nav-tabs-flat" id="myComp" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="datos-tabMP"
            data-bs-toggle="tab"
            data-bs-target="#tabMP"
            type="button"
            role="tab"
          >
            Plan maestro
          </button>
        </li>
        <li class="nav-item d-none" role="presentation">
          <button
            class="nav-link"
            id="datos-tabOthers"
            data-bs-toggle="tab"
            data-bs-target="#tabO"
            type="button"
            role="tab"
          >
            Otros planes
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane pt-2 fade show active"
          id="tabMP"
          role="tabpanel"
          aria-labelledby="datos-tabMP"
        >
          <div class="row g-3">
            <div class="col-md-12">
              <label class="form-label">Compromiso</label>
              <textarea
                class="form-control"
                rows="2"
                formControlName="description"
                [ngClass]="{
                  'input-invalid': submitted && h.description.errors?.required
                }"
              ></textarea>
            </div>
            <div class="col-md-12">
              <label class="form-label">Objetivo</label>
              <select class="form-select" (change)="searchActionLines($event)">
                <option value="0">SELECCIONE</option>
                <option *ngFor="let item of objectiveList" [value]="item.id">
                  {{ item.description }}
                </option>
              </select>
            </div>
            <div class="col-md-12" formGroupName="actionLine">
              <label class="form-label">Alineado a</label>
              <select
                class="form-select"
                formControlName="id"
                [ngClass]="{
                  'input-invalid':
                    submitted &&
                    formCreateCommitments.get('actionLine.id').errors?.pattern
                }"
              >
                <option value="0">SELECCIONE</option>
                <option *ngFor="let item of actionLineList" [value]="item.id">
                  {{ item.name }}
                </option>
              </select>
            </div>
            <div class="col-md-12" formGroupName="allied">
              <label class="form-label">Suscriptor</label>
              <select
                class="form-select"
                formControlName="id"
                [ngClass]="{
                  'input-invalid':
                    submitted &&
                    formCreateCommitments.get('allied.id').errors?.pattern
                }"
              >
                <option value="0">SELECCIONE</option>
                <option *ngFor="let item of alliedList" [value]="item.id">
                  {{ item.name }}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div
          class="tab-pane pt-2"
          id="tabO"
          role="tabpanel"
          aria-labelledby="datos-tabOthers"
        >
          <div class="row g-3">
            <div class="col-md-12">
              <label class="form-label">Compromiso 1</label>
              <textarea class="form-control" rows="2"></textarea>
            </div>
            <div class="col-md-12">
              <label class="form-label">Objetivo del:</label>
              <input
                type="text"
                class="form-control"
                value="Plan de desarrollo concertado"
              />
              <!-- <select class="form-select">
                  <option selected>Plan maestro</option>
                  <option>Plan de desarrollo concertado</option>
                  <option>Plan de vida de las comunidades</option>
                </select> -->
            </div>

            <div class="col-md-12">
              <label class="form-label">Objetivo</label>
              <textarea class="form-control" rows="2">
OB 1 - Mantener la cobertura vegetal del Parque Nacional
                </textarea
              >
            </div>
            <div class="col-md-12">
              <label class="form-label">Alineado a</label>
              <input
                type="text"
                class="form-control"
                value="Linea de acción 1"
              />
              &nbsp;
              <input
                type="text"
                class="form-control"
                value="Linea de acción 2"
              />
            </div>
            <div class="col-md-12">
              <label class="form-label">Compromiso 2</label>
              <textarea class="form-control" rows="2"></textarea>
            </div>
            <div class="col-md-12">
              <label class="form-label">Objetivo del:</label>
              <input
                type="text"
                class="form-control"
                value="Plan de vida de las comunidades"
              />
              <!-- <select class="form-select">
                  <option selected>Plan maestro</option>
                  <option>Plan de desarrollo concertado</option>
                  <option>Plan de vida de las comunidades</option>
                </select> -->
            </div>
            <div class="col-md-12">
              <label class="form-label">Objetivo</label>
              <textarea class="form-control" rows="2">
 OB 3 - lorem ipsum
                </textarea
              >
            </div>
            <div class="col-md-12">
              <label class="form-label">Alineado a</label>
              <input
                type="text"
                class="form-control"
                value="Linea de acción 1"
              />
              &nbsp;
              <input
                type="text"
                class="form-control"
                value="Linea de acción 2"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.close()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
  </form>
</ng-template>
<ng-template #contentCreateCommitmentsExternal let-modal>
  <form
    [formGroup]="formCreateCommitmentsExternal"
    (ngSubmit)="insertCommitmentsExternal()"
    novalidate
  >
    <div class="modal-header">
      <h5 class="modal-title" id="createPerfilLabel">Crear Compromisos</h5>
      <button type="button" class="btn-close" (click)="modal.close()"></button>
    </div>
    <div class="modal-body">
      <ul class="nav nav-tabs nav-tabs-flat" id="myComp" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="datos-tabMP"
            data-bs-toggle="tab"
            data-bs-target="#tabMP"
            type="button"
            role="tab"
          >
            Planes externos
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div
          class="tab-pane pt-2 fade show active"
          id="tabMP"
          role="tabpanel"
          aria-labelledby="datos-tabMP"
        >
          <form [formGroup]="formCreateCommitmentsExternal" novalidate>
            <div class="row g-3">
              <div class="col-md-12">
                <label class="form-label">Compromiso </label>
                <textarea
                  class="form-control"
                  rows="2"
                  formControlName="description"
                  [ngClass]="{
                    'input-invalid': submitted && i.description.errors?.required
                  }"
                ></textarea>
              </div>

              <div class="col-md-12">
                <label class="form-label">Objetivo </label>
                <textarea
                  class="form-control"
                  rows="2"
                  formControlName="objetive"
                  [ngClass]="{
                    'input-invalid': submitted && i.description.errors?.required
                  }"
                ></textarea>
              </div>

              <div class="col-md-12">
                <label class="form-label">Alineado a: </label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="actionLine"
                />
              </div>

              <div class="col-md-12 d-none">
                <label class="form-label">Suscriptor </label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="subscriber"
                />
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="modal.close()">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
  </form>
</ng-template>
<ng-template #contentAlliedDelete let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Eliminar suscriptor</h4>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="modal"
      aria-label="Close"
      (click)="modal.close()"
    ></button>
  </div>
  <div class="modal-body">
    <p class="text-center">
      Esta acción no se puede deshacer.
      <br />
      ¿Estás seguro?
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Cancelar
    </button>
    <button
      type="button"
      ngbAutofocus
      (click)="onDeleteAllied()"
      class="btn btn-primary"
    >
      Aceptar
    </button>
  </div>
</ng-template>

<ng-template #contentCommitmentsExternalDelete let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Eliminar compromiso</h4>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="modal"
      aria-label="Close"
      (click)="modal.close()"
    ></button>
  </div>
  <div class="modal-body">
    <p class="text-center">
      Esta acción no se puede deshacer.
      <br />
      ¿Estás seguro?
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Cancelar
    </button>
    <button
      type="button"
      ngbAutofocus
      (click)="onDeleteCommitmentExternal()"
      class="btn btn-primary"
    >
      Aceptar
    </button>
  </div>
</ng-template>
<ng-template #contentCommitmentsDelete let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Eliminar compromiso</h4>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="modal"
      aria-label="Close"
      (click)="modal.close()"
    ></button>
  </div>
  <div class="modal-body">
    <p class="text-center">
      Esta acción no se puede deshacer.
      <br />
      ¿Estás seguro?
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.close()">
      Cancelar
    </button>
    <button
      type="button"
      ngbAutofocus
      (click)="onDeleteCommitment()"
      class="btn btn-primary"
    >
      Aceptar
    </button>
  </div>
</ng-template>
<div
  class="modal fade"
  id="createActivity"
  tabindex="-1"
  aria-labelledby="createActivityLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="createActivityLabel">Crear actividades</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="row g-3"></div>
        <hr />
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <td>Nro.</td>
                <td>Actividad</td>
                <td>Tipo indicador</td>
                <td>Indicador</td>
                <td>Meta</td>
                <td>Semestre</td>
                <td>Opción</td>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let field of fieldArray; let i = index">
                <td>{{ i + 1 }}</td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    [value]="field.activity"
                  />
                </td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    [value]="field.indicatorType"
                  />
                </td>

                <td>
                  <input
                    class="form-control"
                    type="text"
                    [value]="field.indicator"
                  />
                </td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    [value]="field.goal"
                  />
                </td>
                <td>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox1"
                      [checked]="field.trim1"
                    />
                    <label class="form-check-label" for="inlineCheckbox1"
                      >1</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox2"
                      [checked]="field.trim2"
                    />
                    <label class="form-check-label" for="inlineCheckbox2"
                      >2</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox3"
                      [checked]="field.trim3"
                    />
                    <label class="form-check-label" for="inlineCheckbox3"
                      >3</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox4"
                      [checked]="field.trim4"
                    />
                    <label class="form-check-label" for="inlineCheckbox4"
                      >4</label
                    >
                  </div>
                </td>
                <td>
                  <button
                    class="btn btn-sm btn-outline-danger border-0"
                    type="button"
                    (click)="deleteFieldValue(i)"
                  >
                    <i class="bi bi-dash-square fs-lg"></i>
                  </button>
                </td>
              </tr>
              <tr>
                <td>
                  <input class="form-control" type="text" disabled />
                </td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    id="newAttributeCode"
                    [(ngModel)]="newAttribute.activity"
                    name="newAttributeActivity"
                  />
                </td>
                <td>
                  <select
                    class="form-select"
                    [(ngModel)]="newAttribute.indicatorType"
                  >
                    <option value="Acumulado">Acumulado</option>
                    <option value="Promedio">Promedio</option>
                  </select>
                </td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    id="newAttributeName"
                    [(ngModel)]="newAttribute.indicator"
                    name="newAttributeIndicator"
                  />
                </td>
                <td>
                  <input
                    class="form-control"
                    type="text"
                    id="newAttributePrice"
                    [(ngModel)]="newAttribute.goal"
                    name="newAttributeGoal"
                  />
                </td>
                <td>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox11"
                      [(ngModel)]="newAttribute.trim1"
                    />
                    <label class="form-check-label" for="inlineCheckbox11"
                      >1</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox12"
                      [(ngModel)]="newAttribute.trim2"
                    />
                    <label class="form-check-label" for="inlineCheckbox12"
                      >2</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox13"
                      [(ngModel)]="newAttribute.trim3"
                    />
                    <label class="form-check-label" for="inlineCheckbox13"
                      >3</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="inlineCheckbox14"
                      [(ngModel)]="newAttribute.trim4"
                    />
                    <label class="form-check-label" for="inlineCheckbox14"
                      >4</label
                    >
                  </div>
                </td>

                <td>
                  <div class="text-nowrap">
                    <button
                      type="button"
                      class="btn btn-sm btn-outline-success border-0"
                      (click)="addFieldValue()"
                    >
                      <i class="bi bi-plus-square fs-lg"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancelar
        </button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          Guardar
        </button>
      </div>
    </div>
  </div>
</div>
<!-- <div id="mainWindow">
  <div>
    <div style="padding-left: 4px" class="container">
      <p>Carga de shapefile del área del ámbito del acuerdo de conservación</p>
      <form enctype="multipart/form-data" method="post" id="uploadForm">
        <div class="field">
          <label class="file-upload form-label">
            <span><strong>Agregar shapefile</strong></span>
            <input
              type="file"
              name="file"
              id="inFile"
              [disabled]="layersGraphic[0].attributes.sended"
            />
          </label>
        </div>
      </form>
      <span
        class="file-upload-status"
        style="opacity: 1"
        id="upload-status"
      ></span>
      <div id="fileInfo"></div>
    </div>
  </div>
</div> -->
<!-- <div id="mainWindow2">
  <div>
    <div style="padding-left: 4px" class="container">
      <p>
        Carga de shapefile del área de vigilancia del acuerdo de conservación
      </p>
      <form enctype="multipart/form-data" method="post" id="uploadForm2">
        <div class="field">
          <label class="file-upload form-label">
            <span><strong>Agregar shapefile</strong></span>
            <input
              type="file"
              name="file"
              id="inFile2"
              [disabled]="layersGraphic[1].attributes.sended"
            />
          </label>
        </div>
      </form>
      <span
        class="file-upload-status"
        style="opacity: 1"
        id="upload-status2"
      ></span>
      <div id="fileInfo2"></div>
    </div>
  </div>
</div> -->
<!-- <div id="mainWindow3">
  <div>
    <div style="padding-left: 4px" class="container">
      <p>Carga de shapefile del área de restauración</p>
      <form enctype="multipart/form-data" method="post" id="uploadForm3">
        <div class="field">
          <label class="file-upload form-label">
            <span><strong>Agregar shapefile</strong></span>
            <input type="file" name="file" id="inFile3" />
          </label>
        </div>
      </form>
      <span
        class="file-upload-status"
        style="opacity: 1"
        id="upload-status3"
      ></span>
      <div id="fileInfo3"></div>
    </div>
  </div> -->
<!-- </div> -->
